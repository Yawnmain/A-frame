<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Путешествие по горам</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/n5ro/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
    <script>
      // Компонент для добавления взаимодействия с кристаллами
      AFRAME.registerComponent('interactive-crystal', {
        init: function () {
          const el = this.el;

          // Событие на взаимодействие (например, "click" от курсора или контроллера)
          el.addEventListener('click', () => {
            // Изменяем цвет кристалла при взаимодействии
            el.setAttribute('material', 'color', '#00FF00');
            
            // Воспроизведение звука
            const sound = el.components.sound;
            if (sound) {
              sound.playSound();
            }
          });
        },
      });
    </script>
  </head>
  <body>
    <a-scene physics="gravity: -9.8">
      <!-- 360° фото на фоне -->
      <a-sky src="https://cdn.glitch.global/29fc3966-b459-4737-a8be-cefd3933ffe4/31407153198_8f2551e58d_k.jpg?v=1735056049252"></a-sky>

      <!-- Солнце и освещение -->
      <a-light type="directional" position="0 5 -5" intensity="1"></a-light>
      <a-light type="ambient" intensity="0.5"></a-light>

      <!-- Земля с текстурой -->
      <a-plane
        src="https://cdn.glitch.global/29fc3966-b459-4737-a8be-cefd3933ffe4/44954406812_7f9e5a3ed0_c.jpg?v=1735056245184"
        position="0 0 0" 
        rotation="-90 0 0" 
        width="30" 
        height="50" 
        static-body></a-plane>

      <!-- Ручей -->
      <a-plane
        position="0 0.01 -5" 
        rotation="-90 0 0" 
        width="30" 
        height="10" 
        color="#1E90FF" 
        material="opacity: 0.7; side: double;"
        dynamic-body></a-plane>

      <!-- Камни с интерактивным поведением -->
      <a-dodecahedron 
        position="0 0 -4.5"
        scale="1 0.5 1"
        radius="1" 
        color="#8B4513"
        interactive-rock
        sound="src: https://cdn.glitch.global/29fc3966-b459-4737-a8be-cefd3933ffe4/swiming_pool_water_splash_11427.mp3?v=1735114583979"
        static-body></a-dodecahedron>
      <a-dodecahedron 
        position="-1 0 -2.7"
        scale="1 0.5 1"
        radius="1" 
        color="#8B4513"
        interactive-rock
        sound="src: https://cdn.glitch.global/29fc3966-b459-4737-a8be-cefd3933ffe4/swiming_pool_water_splash_11427.mp3?v=1735114583979"
        static-body></a-dodecahedron>
      <a-dodecahedron 
        position="-2 0 -1"
        scale="1 0.5 1"
        radius="1" 
        color="#8B4513"
        interactive-rock
        sound="src: https://cdn.glitch.global/29fc3966-b459-4737-a8be-cefd3933ffe4/swiming_pool_water_splash_11427.mp3?v=1735114583979"
        static-body></a-dodecahedron>
      <a-dodecahedron 
        position="1 0 -8"
        scale="1.5 0.5 2"
        radius="1" 
        color="#8B4513"
        interactive-rock
        sound="src: https://cdn.glitch.global/29fc3966-b459-4737-a8be-cefd3933ffe4/swiming_pool_water_splash_11427.mp3?v=1735114583979"
        static-body></a-dodecahedron>
      <a-dodecahedron 
        position="1 0 -5.5"
        scale="0.2 0.2 0.5"
        radius="1" 
        color="#8B4513"
        interactive-rock
        sound="src: https://cdn.glitch.global/29fc3966-b459-4737-a8be-cefd3933ffe4/swiming_pool_water_splash_11427.mp3?v=1735114583979"
        static-body></a-dodecahedron>

      <!-- Пещера -->
      <a-entity position="0 0 0">
        <!-- Стены пещеры -->
        <a-cone position="-3 1 -15" radius-bottom="3" radius-top="0.1" height="10" color="#808080" static-body></a-cone>
        <a-cone position="2 1 -15" radius-bottom="3" radius-top="0.1" height="10" color="#808080" static-body></a-cone>
        <a-dodecahedron position="1 1 -17" scale="3 3 3" radius="1" color="#808080" ></a-dodecahedron>
        <!-- Сталактиты -->
        <a-cone position="-3 5 -12" radius-bottom="0.2" radius-top="0" height="2" color="#808080" static-body></a-cone>
        <a-cone position="2 4.5 -12" radius-bottom="0.2" radius-top="0" height="2" color="#808080" static-body></a-cone>

        <!-- Кристаллы -->
        <a-box position="-2 0.5 -13" scale="0.3 1.5 0.3" color="#00FFFF" interactive-crystal sound="src: https://cdn.glitch.global/29fc3966-b459-4737-a8be-cefd3933ffe4/ambient_melody.mp3?v=1735115588594" static-body></a-box>
        <a-box position="1 0.5 -13" scale="0.3 1.5 0.3" color="#00FFFF" interactive-crystal sound="src: https://cdn.glitch.global/29fc3966-b459-4737-a8be-cefd3933ffe4/ambient_melody.mp3?v=1735115588594" static-body></a-box>

        <!-- Звук капель воды -->
        <a-sound src="url(https://cdn.glitch.global/29fc3966-b459-4737-a8be-cefd3933ffe4/water_drip.mp3?v=1735115595301)" autoplay="true" loop="true" position="0 5 -12"></a-sound>
      </a-entity>

      <!-- Орел в небе с анимацией вращения -->
      <a-gltf-model 
        src="https://cdn.glitch.global/29fc3966-b459-4737-a8be-cefd3933ffe4/animated_eagle.glb?v=1735114839341" 
        position="-3 5 3" 
        scale="0.01 0.01 0.01"
        rotation="0 180 0"
        animation="property: rotation; to: 0 360 0; dur: 10000; loop: true; easing: linear;">
      </a-gltf-model>

      <!-- Камера и контроллер -->
      <a-camera position="0 1.6 3" wasd-controls="acceleration: 20" look-controls>
        <a-cursor></a-cursor>
      </a-camera>
    </a-scene>
  </body>
</html>
